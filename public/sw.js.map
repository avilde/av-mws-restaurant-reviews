{"version":3,"sources":["sw.js"],"names":["APP_NAME","CACHE_NAME","cachedFiles","self","addEventListener","event","waitUntil","caches","open","then","cache","addAll","catch","e","console","error","keys","cacheNames","Promise","all","filter","name","startsWith","map","delete","request","method","respondWith","match","resp","fetch","put","clone","tag","syncData","_","log"],"mappings":"AAAA,MAAMA,SAAW,QACfC,WAAa,iBACbC,aACE,cACA,mBACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,eACA,uBACA,uBACA,uBACA,wBACA,wBACA,wBACA,gCACA,gCACA,gCACA,iCACA,iCACA,iCACA,SACA,iBACA,gBAGJC,KAAKC,iBAAiB,UAAWC,IAC/BA,EAAMC,UACJC,OACCC,KAAKP,YACLQ,KAAKC,GACGA,EAAMC,OAAOT,cAErBU,MAAMC,GAAKC,QAAQC,0CAAgDF,SAIxEV,KAAKC,iBAAiB,WAAYC,IAChCA,EAAMC,UACJC,OACCS,OACAP,KAAKQ,GACGC,QAAQC,IACbF,EACCG,OAAOC,GACCA,EAAKC,WAAW,WAAaD,IAASpB,YAE9CsB,IAAIF,GACId,OAAOiB,OAAOH,MAI1BT,MAAMC,GAAKC,QAAQC,2CAAiDF,SAIzEV,KAAKC,iBAAiB,QAASC,IACA,QAAzBA,EAAMoB,QAAQC,QAChBrB,EAAMsB,YACJpB,OACCC,KAAKP,YACLQ,KAAKC,GACGA,EACJkB,MAAMvB,EAAMoB,SACZhB,KAAKoB,GAEFA,GACAC,MAAMzB,EAAMoB,SACXhB,KAAKoB,IACJnB,EAAMqB,IAAI1B,EAAMoB,QAASI,EAAKG,SAEvBH,IAERjB,MAAMC,GAAKC,QAAQC,gCAAsCF,OAG7DD,MAAMC,GAAKC,QAAQC,0DAAgEF,OAEvFD,MAAMC,GAAKC,QAAQC,uDAA6Dd,sBAAsBY,SAM7GV,KAAKC,iBAAiB,OAAQ,SAAUC,GACrB,UAAbA,EAAM4B,KACR5B,EAAMC,UAAU4B,cAIpBA,SAAWC,CAAAA,IACTrB,QAAQsB,IAAI","file":"sw.js","sourcesContent":["const APP_NAME = 'av-rr',\r\n  CACHE_NAME = `${APP_NAME}-static-1`,\r\n  cachedFiles = [\r\n    '/index.html',\r\n    '/restaurant.html',\r\n    '/img/1.webp',\r\n    '/img/2.webp',\r\n    '/img/3.webp',\r\n    '/img/4.webp',\r\n    '/img/5.webp',\r\n    '/img/6.webp',\r\n    '/img/7.webp',\r\n    '/img/8.webp',\r\n    '/img/9.webp',\r\n    '/img/10.webp',\r\n    '/img/app-logo16.webp',\r\n    '/img/app-logo48.webp',\r\n    '/img/app-logo64.webp',\r\n    '/img/app-logo128.webp',\r\n    '/img/app-logo256.webp',\r\n    '/img/app-logo512.webp',\r\n    'img/google_map-w320_h400.webp',\r\n    'img/google_map-w412_h400.webp',\r\n    'img/google_map-w740_h400.webp',\r\n    'img/google_map-w1000_h400.webp',\r\n    'img/google_map-w1920_h400.webp',\r\n    'img/google_map-w2545_h400.webp',\r\n    '/sw.js',\r\n    '/manifest.json',\r\n    '/favicon.ico'\r\n  ];\r\n\r\nself.addEventListener('install', event => {\r\n  event.waitUntil(\r\n    caches\r\n    .open(CACHE_NAME)\r\n    .then(cache => {\r\n      return cache.addAll(cachedFiles);\r\n    })\r\n    .catch(e => console.error(`[${APP_NAME}] (install) caching error: ${e}`))\r\n  );\r\n});\r\n\r\nself.addEventListener('activate', event => {\r\n  event.waitUntil(\r\n    caches\r\n    .keys()\r\n    .then(cacheNames => {\r\n      return Promise.all(\r\n        cacheNames\r\n        .filter(name => {\r\n          return name.startsWith('av-rr-') && name !== CACHE_NAME;\r\n        })\r\n        .map(name => {\r\n          return caches.delete(name);\r\n        })\r\n      );\r\n    })\r\n    .catch(e => console.error(`[${APP_NAME}] (activate) caching error: ${e}`))\r\n  );\r\n});\r\n\r\nself.addEventListener('fetch', event => {\r\n  if (event.request.method === 'GET') {\r\n    event.respondWith(\r\n      caches\r\n      .open(CACHE_NAME)\r\n      .then(cache => {\r\n        return cache\r\n          .match(event.request)\r\n          .then(resp => {\r\n            return (\r\n              resp ||\r\n              fetch(event.request)\r\n              .then(resp => {\r\n                cache.put(event.request, resp.clone());\r\n\r\n                return resp;\r\n              })\r\n              .catch(e => console.error(`[${APP_NAME}] (fetch) error: ${e}`))\r\n            );\r\n          })\r\n          .catch(e => console.error(`[${APP_NAME}] (fetch) exception in cache match. Error: ${e}`));\r\n      })\r\n      .catch(e => console.error(`[${APP_NAME}] (fetch) exception when openning cache ${CACHE_NAME}. Error: ${e}`))\r\n    );\r\n  }\r\n});\r\n\r\n// sync any data changed offline\r\nself.addEventListener('sync', function (event) {\r\n  if (event.tag == 'syncUp') {\r\n    event.waitUntil(syncData());\r\n  }\r\n});\r\n\r\nsyncData = _ => {\r\n  console.log('synched');\r\n};"],"sourceRoot":"/source/"}